// populate.js
// Run this from inside /docs to scaffold all .md files with starter content

const fs = require('fs');
const path = require('path');

// map filenames to default content
const templates = {
  "01-vision.md": `# Vision

Dwarf War is about a single dwarven nation’s **heartward conquest**: 
engineering beauty into stone while surviving what the caverns send against them.

Key verbs: **Survey, Dig, Fortify, Adorn, Endure, Heal, Celebrate, Expand**.
`,
  "02-glossary.md": `# Glossary

- **Barrow:** Cultural heart; source of identity; damage → pain.
- **Tunnel (Class):** Engineering crawl, passage, or grand hall.
- **Heartward:** Direction deeper into the mountain.
- **Wild Cavern:** Natural void; denizen spawner; partial workings possible.
- **Ornamentation:** Carvings, inlays, iconography; buffers pain.
- **Dwarven Pain:** Morale/stress meter triggered by structural or beauty harm.
`,
  "03-core-loop.md": `# Core Loop

1. **Survey** → reveal caverns and ores  
2. **Plan & Dig** tunnels by class  
3. **Encounter** denizens → respond (fortify, adorn, patrol)  
4. **Damage & Pain** if beauty/structure harmed  
5. **Heal & Adorn** to reduce pain  
6. **Celebrate** festivals for temporary buffs  
7. **Expand** to the next heartward sector  
`,
  "04-worldgen.md": `# Worldgen Sketch

- **Barrows as nodes**; caverns generated by noise + constraints
- **Heartward sectors**: each ring reveals caverns
- **Caverns** tagged {natural, worked, denizen-lair, ore-vein}
- Each cavern has a **Threat Clock** (quiet → signs → attack → rest)
`,
  "05-tunnel-classes.md": `# Tunnel Classes

| Class   | Size       | Cost | Flow | Beauty Cap | Notes |
|---------|------------|------|------|------------|-------|
| S-Eng   | 5×5 ft     | Low  | Slow | 0          | Crawl, brittle |
| M-Pass  | 10×10 ft   | Med  | Med  | 1          | Corridor |
| G-Grand | 20×20 ft   | High | Fast | 3          | Ornate hall |

- Integrity: resistance to collapse
- Flow: dwarves queue; bigger = smoother
- Beauty: caps ornamentation value
`,
  "06-dwarven-pain.md": `# Dwarven Pain

Pain rises when:
- Structural damage occurs
- Ornamentation destroyed

Pain falls when:
- Repairs made
- Adornment added
- Festivals held

Pain Effects:
- Tier 1: slower work
- Tier 2: mistakes increase
- Tier 3: strikes/desertion risk
`,
};

const docsDir = process.cwd();
fs.readdirSync(docsDir).forEach(file => {
  if (file.endsWith('.md')) {
    const filePath = path.join(docsDir, file);
    const content = templates[file] || `# ${file.replace('.md','')}\n\nTBD.\n`;
    // only populate if file is empty
    const existing = fs.existsSync(filePath) ? fs.readFileSync(filePath, 'utf8') : '';
    if (!existing.trim()) {
      fs.writeFileSync(filePath, content, 'utf8');
      console.log(`Populated: ${file}`);
    } else {
      console.log(`Skipped (not empty): ${file}`);
    }
  }
});